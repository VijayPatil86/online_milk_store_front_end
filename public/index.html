<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Online Milk Store</title>
<script type="text/javascript">
async function loadCategories() {
    try {
        // Fetch data from the API
        const response = await fetch('http://localhost:9001/categories');
		var data;
        // Check if the response is successful
        if (response.status == 204) {
            data = 'Categories Not Available';
            document.getElementById("divCategories").innerHTML = data;
        } else {
			// Parse the JSON from the response
            const jsonData = await response.json();
			//data = JSON.parse(json)
            var list = "";
            jsonData.categoryBeans.forEach(function(categoryBean){
				list = list + "<li><a href=#>" + categoryBean.categoryName + "</a></li>"
            });
            document.getElementById("divCategories").innerHTML = list;
            document.getElementById("a_GetAllAvailableCategories").href = jsonData._links.self.href;
        }
    } catch (error) {
        // Handle any errors
        console.log('There was a problem with the fetch operation:', error);
    }
	
}
	/*loadCategories().then(
		data => document.getElementById("divCategories").innerHTML = data
	);*/
</script>
</head>
<body onload="loadCategories()">
	<H1>Online Milk Store</H1>
	<div id="divCategories"></div>
	<a id="a_GetAllAvailableCategories">Get All Available Categories</a>
</body>
</html>